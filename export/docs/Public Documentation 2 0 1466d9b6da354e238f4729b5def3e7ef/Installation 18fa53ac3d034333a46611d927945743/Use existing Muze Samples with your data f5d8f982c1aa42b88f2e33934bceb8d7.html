<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Use existing Muze Samples with your data</title><style>
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, YuMincho, "Yu Mincho", "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC", "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, YuMincho, "Yu Mincho", "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC", "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}
.select-value-color-default { background-color: rgba(206,205,202,0.5); }
.select-value-color-gray { background-color: rgba(155,154,151, 0.4); }
.select-value-color-brown { background-color: rgba(140,46,0,0.2); }
.select-value-color-orange { background-color: rgba(245,93,0,0.2); }
.select-value-color-yellow { background-color: rgba(233,168,0,0.2); }
.select-value-color-green { background-color: rgba(0,135,107,0.2); }
.select-value-color-blue { background-color: rgba(0,120,223,0.2); }
.select-value-color-purple { background-color: rgba(103,36,222,0.2); }
.select-value-color-pink { background-color: rgba(221,0,129,0.2); }
.select-value-color-red { background-color: rgba(255,0,26,0.2); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="f5d8f982-c1aa-42b8-8f2e-33934bceb8d7" class="page sans"><header><h1 class="page-title"><strong>Use existing Muze Samples with your data</strong></h1></header><div class="page-body"><p id="226aebb1-b213-433c-a13c-6fe24ce27050" class=""><strong>Table of Content</strong><div class="indented"><nav id="694b2ea4-4c96-4fad-a912-9959aebd5d27" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#f9a2c66f-1b48-4b99-b0bd-a053937226d2"><strong>Sources</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#6f89cb35-feca-4188-a40a-3d6f59c87fbf"><strong>Wrapping up</strong></a></div></nav></div></p><hr id="843bc82d-275d-44e1-84c6-4f97c1d0e8ab"/><p id="95c379e5-aa0f-4750-8176-f962a65d6670" class="">Through out the documentation pages and examples, we have used Muze to create visualizations to showcase the capabilities of the library. All of these visualizations are created using real data and thinking of real world use cases. You might find the need of using few of the visualizations just by copy pasting it to your project. This article explains the process of using a sample, change data source of a sample and integrate it to an existing project.</p><h2 id="f9a2c66f-1b48-4b99-b0bd-a053937226d2" class=""><strong>Sources</strong></h2><p id="4c2f01b4-728b-456d-bffc-f50482c424a1" class="">The main source of visualizations created by Muze is theÂ <mark class="highlight-blue"><a href="https://muzejs.org/examples">example page</a></mark>. You can edit the samples directly in the website and change of output will be reflected instantly.</p><p id="444807cb-2f57-41fb-bc36-9410266c3a3e" class="">There are visualizations available scattered across the documentations as well. For demonstration purpose documentation also renders live visualization.</p><p id="e60b0c5e-f4f7-4a61-baee-88a4164538c6" class="">Here&#x27;s theÂ <em>Stacked Bar Chart</em>Â from theÂ <mark class="highlight-blue"><a href="https://muzejs.org/examples">example page</a></mark>:</p><pre id="5c74f296-9f5f-4143-9a44-c4bc43cde613" class="code"><code>Promise.all([
  loadData(&quot;cars.json&quot;),
  loadData(&quot;cars-schema.json&quot;)
]).then(res =&gt; {
  const data = res[0];
  const schema = res[1];

  let DataModel = muze.DataModel;
  let rootData = new DataModel(data, schema);

  const dmWithCount = rootData.calculateVariable(
    {
      name: &quot;CountVehicle&quot;,
      type: &quot;measure&quot;,
      defAggFn: &quot;count&quot;, // When ever aggregation happens, it counts the number of elements in the bin
      numberFormat: val =&gt; parseInt(val, 10)
    },
    [&quot;Name&quot;, () =&gt; 1]
  );

  let env = muze();
  let canvas = env.canvas();

  canvas
    .rows([&quot;CountVehicle&quot;]) // CountVehicle goes in y axis
    .columns([&quot;Cylinders&quot;]) // Cylinders goes in x-axis
    .color(&quot;Origin&quot;) // Colors encoding using the Origin field
    .data(dmWithCount)
    .layers([
      {
        mark: &quot;bar&quot;,
        encoding: { y: &quot;CountVehicle&quot; },
        transform: { type: &quot;stack&quot; }
      }
    ])
    .title(&quot;Stacked bar chart&quot;, { position: &quot;top&quot;, align: &quot;right&quot; })
    .subtitle(&quot;Count of cars per cylinder per origin&quot;, {
      position: &quot;top&quot;,
      align: &quot;right&quot;
    })
    .mount(&quot;#chart&quot;); // Set the chart mount point
});</code></pre><p id="a5e4902f-1b97-4d89-a678-2ac19879365c" class="">Here is few point to note about the above visualization</p><ul id="bb194c03-2c8c-4ad1-a5a1-1fe7e8968dc0" class="bulleted-list"><li>We load the data and schema from an URL and save it in variablesÂ <code>data</code>Â andÂ <code>schema</code>. </li></ul><ul id="3ca87177-7bc9-43cd-a713-6fa90632d2e7" class="bulleted-list"><li>The original data does not contain any information about vehicle count,Â <code>calculateVariable</code>Â function creates the field.</li></ul><ul id="788dd3a5-edf6-4c90-9f3b-1766f504e879" class="bulleted-list"><li>By default bar chart is rendered based on the variable type mapped to X and Y axis.</li></ul><ul id="a2827c22-3e63-42e2-adf7-55d4ff7f1516" class="bulleted-list"><li>Reference toÂ <code>chart</code>Â DOM element is available inside the code editor of documentation and examples pages only.</li></ul><p id="8dee4ffd-fa1b-4525-ae09-8dc96ac70caf" class="">You can go ahead and start editing the code section and see the change in the chart above. You can make these changes to any of the code sections provided and the corresponding chart will visually change.</p><p id="8e115add-c05e-4b8d-9668-e242ed06ce28" class="">In the above example, We&#x27;ll change the variable mapped to axes. Instead of vehicle count, we will see the same chart with the averageÂ <em>Acceleration</em>Â for everyÂ <em>Cylinder</em>Â byÂ <em>Origin</em></p><pre id="c1757601-2a2b-4d2a-ba84-2e2c5b57ce75" class="code"><code>const DataModel = muze.DataModel
Promise.all([loadData(&#x27;cars.json&#x27;), loadData(&#x27;cars-schema.json&#x27;)]).then((res) =&gt;{
  const data = res[0];
  const schema = res[1];
  const dm = new DataModel(data, schema);
  const env = muze();
  env.canvas()
    .rows([&#x27;Acceleration&#x27;])
    .columns([&#x27;Cylinders&#x27;])
    .data(dm)
    .color(&#x27;Origin&#x27;)
    .mount(&#x27;#chart&#x27;);
});</code></pre><p id="a26315cf-a498-4b8c-8e30-3801fc76b527" class=""><strong>Using samples with your data</strong></p><p id="c6921acd-54ef-4538-a4ce-746f50be10c2" class="">You can get started with muze with your own data by simply forking the example on <strong>CodePen</strong> or copy pasting the code you see in example.</p><p id="a5510a6e-7970-4d94-98ec-f597dcc9583f" class="">For every sample we do load the data before the sample gets executed. We use a function namedÂ <code>loadData</code>Â which is available internally in the code editor. </p><p id="29374713-c11f-4f0b-9f25-ac9e0541c3ef" class="">Now, if you want to use any other data or schema other than <em>cars.json</em> and the given <em>schema</em>, the loadData function looks as follows:</p><pre id="b8e1c442-ea32-4bbb-9667-77fed194f77d" class="code code-wrap"><code>...
loadData(&#x27;&#x27;, url).then((res) =&gt;{
...
or
...
Promise.all([loadData(&#x27;&#x27;, url1), loadData(&#x27;&#x27;, url2)]).then((res) =&gt;{
...</code></pre><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="4317cf3a-0166-4f9a-81f9-4f25ec31bcb6"><div style="font-size:1.5em"><span class="icon">ðŸ’¡</span></div><div style="width:100%"><mark class="highlight-yellow">What if both parameters are present in loadData?
</mark>If the second parameter is present, the first parameter is ignored.</div></figure><p id="d4502e62-9342-4f1d-a149-18e54b85db9e" class="">However, if you are trying Muze with <strong>jsfiddle</strong> or <strong>jsbin</strong> like services, then you can use browser&#x27;sÂ <mark class="highlight-blue"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">fetch</a></mark><mark class="highlight-blue">Â </mark>API to fetch data from server. AÂ <code>fetch</code>Â equivalent code of the above sample would be:</p><pre id="abf72457-a254-4297-a28a-1d6b68345cfc" class="code"><code>Promise.all([fetch(&#x27;cars.json&#x27;), fetch(&#x27;cars-schema.json&#x27;)]).then((response) =&gt; {
    Promise.all(response.map(_ =&gt; _.json())).then((res) =&gt; {
        const data = res[0]
        const schema = res[1];

        /* code from editor comes here */
    });
});</code></pre><p id="1bbab41f-ba91-43ae-90a4-a16c2f4b5b36" class="">You can simply copy paste muze specific code inside and get started with it. </p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="f7d54087-b1cb-4e39-9a3f-b1058d73617e"><div style="font-size:1.5em"><span class="icon">ðŸ’¡</span></div><div style="width:100%"><strong><mark class="highlight-yellow">Change field mapping
</mark></strong>If you are using an Muze sample using your own data, make sure that you change field encoding mapping of <code>rows</code>, <code>columns</code>, <code>color</code>, <code>shape</code>, <code>size</code> etc... accordingly based on the variables you have in your data.</div></figure><h2 id="6f89cb35-feca-4188-a40a-3d6f59c87fbf" class=""><strong>Wrapping up</strong></h2><p id="5e945e2a-0eca-45c7-94c0-9a8282e7fbd2" class="">In this tutorial we have learnt how you can Muze samples with your own data. Getting your hand dirty with the code is the fastest and most robust way to learn anything. WithÂ <mark class="highlight-blue"><a href="https://github.com/chartshq/generator-muze">this seed</a></mark>Â project andÂ <a href="https://codepen.io/chartshq/pen/WNbweqO"><mark class="highlight-blue">CodePen</mark></a>Â template you can get started instantly.</p><p id="c531e316-d9a8-4258-8181-540042405791" class="">If you want to read what more you can do using Muze, do checkoutÂ <a href="https://www.notion.so/charts/Changing-Plot-Type-3dcab5dc44fb42d69f32dfbf88cdd95d"><mark class="highlight-blue">changing plot type</mark></a>Â tutorial.</p><p id="49ccf8ad-bf6c-4cba-bad1-a9db619c2fef" class="">
</p></div></article></body></html>