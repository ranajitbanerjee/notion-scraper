<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Creating a Custom Interaction</title><style>
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark-href {
	font-size: 0.75em;
	opacity: 0.5;
}

.sans { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, KaiTi, STKaiTi, '华文楷体', KaiTi_GB2312, '楷体_GB2312', serif; }
.mono { font-family: Nitti, 'Microsoft YaHei', '微软雅黑', monospace; }
.pdf .sans { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .code { font-family: Source Code Pro, 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, KaiTi, STKaiTi, '华文楷体', KaiTi_GB2312, '楷体_GB2312', serif, 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .mono { font-family: PT Mono, Nitti, 'Microsoft YaHei', '微软雅黑', monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style><link rel="stylesheet" href="/static/iframe-docs/css/github.css"><link rel="stylesheet" href="/static/iframe-docs/css/style.css"><script src="/static/iframe-docs/js/highlight.pack.js"></script><script src="/static/iframe-docs/js/test.js"></script></head><body><article id="df43238f-d4c1-4705-af55-1b7f09896d34" class="page sans"><header><h1 class="page-title"><strong>Creating a Custom Interaction</strong></h1></header><div class="page-body"><p id="1a70c8ee-41a1-4463-a010-0dd52302d9fc" class><strong>Table of Contents</strong></p><div class="indented"><nav id="9fcb6ee5-7bae-4eef-b190-8cb6cf847987" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#bdeefccb-6c2c-46df-81a5-7735f1e527af"><strong>Registering a physical action</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#51806cb0-8118-45ef-a948-e80b06b52052"><strong>Registering a Behaviour</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#ff3f4573-694f-4f41-bff9-4bb0707d2aca"><strong>Mapping the behaviour to the physical action</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#60ec19a5-86e7-4449-8d48-fe87dfb117d5"><strong>Custom Interaction Using A Spawnable Side Effect</strong></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#83d1cbdb-eda8-47e6-9ed9-9383a088107c"><strong>Registering a Spawnable Side Effect</strong></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#ce2ab443-a757-4aff-b4c3-7d2b522d83bf"><strong>Mapping the side effects to the behaviour</strong></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#6a0d78bf-4af4-4992-90cd-dae47f63d751"><strong>Putting it all together</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#fd4b6431-4ee0-454c-b863-4d84c65582a2"><strong>Custom Interaction Using A Surrogate Side Effect</strong></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d024b2ab-a7f8-4532-b876-4ee655561f89"><strong>Registering a Surrogate Side Effect</strong></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#9d665377-4f34-4c05-a916-b278119d56f4"><strong>Mapping the side effects to the behaviour</strong></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#be22d7fc-3347-414b-a018-dac6c9242071"><strong>Putting it all together</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#673fd006-0fa5-43b7-9005-4d2be79d1b60"><strong>Wrapping Up</strong></a></div></nav></div><p></p><hr id="dbe64ec0-a5f0-4202-a7d1-7f734018299a"><p id="02f8e7a5-2b51-4ea2-abb8-aa75e6622777" class>In this section, we will be creating a completely custom interaction based on all the interaction topics covered so far. Thus, before you proceed, make sure you have learnt about:</p><ul id="41e9b342-6dd1-4110-85e0-2fe085f32d57" class="bulleted-list"><li><mark class="highlight-blue"><a href="https://muzejs.org/docs/register-physical">Registering physical actions</a></mark></li></ul><ul id="dd2d0a2c-d7ed-412a-b0f1-715e6b392b51" class="bulleted-list"><li><mark class="highlight-blue"><a href="https://muzejs.org/docs/register-behaviours">Registering a new behaviour</a></mark></li></ul><ul id="d2f8c9d5-44fa-4577-9654-a761fb34a532" class="bulleted-list"><li><mark class="highlight-blue"><a href="https://muzejs.org/docs/register-sideeffects">Registering new side effects with a behaviour</a></mark></li></ul><ul id="8f9cb5e9-b688-4839-a57d-abf0204dfdb9" class="bulleted-list"><li><mark class="highlight-blue"><a href="https://muzejs.org/docs/mapping-behaviour-physical">Mapping a behaviour to a physical action</a></mark></li></ul><ul id="80f434b9-38d3-4997-a370-00621b1d106c" class="bulleted-list"><li><mark class="highlight-blue"><a href="https://muzejs.org/docs/mapping-sideeffects-behaviours">Mapping side effects to a behaviour</a></mark></li></ul><p id="77e41e41-5f7d-4a15-b84b-7338c83fed50" class>Let&apos;s put it all together with two examples, one each for Surrogate and Spawnable Side Effects. We will be using the&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/static/cars.json">cars.json</a></mark><mark class="highlight-blue">&#xA0;</mark>data for this section. However, you can use any data and any canvas definition with the same interaction model to get the desired output, since the interaction model does not necessarily depend on those criterias.</p><h2 id="bdeefccb-6c2c-46df-81a5-7735f1e527af" class><strong>Registering a physical action</strong></h2><p id="23901ec8-d9a2-440e-bdf9-17aca8959684" class>We start off by registering a custom physical action. We had created a&#xA0;<code>ctrlClick</code>&#xA0;physical action while learning about registering physical actions. You can find it&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/register-physical">here</a></mark>. The code can be found below:</p><pre id="dfe0ac58-a545-46dd-a50e-21cdc4f8eaf9" class="code"><code>ActionModel
.for(canvas)
.registerPhysicalActions({  /* to register the action */
    ctrlClick: firebolt =&gt; (targetEl, behaviours) =&gt; {
        targetEl.on(&apos;click&apos;, function (data) {
            if (event.metaKey) {
                const event = utils.getEvent();
                const mousePos = utils.getClientPoint(this, event);
                const interactionConfig = {
                    data,
                    event
                };
                const nearestPoint = firebolt.context.getNearestPoint(mousePos.x, mousePos.y, 
                          interactionConfig);
                firebolt.triggerPhysicalAction(&apos;ctrlClick&apos;, {
                            criteria: nearestPoint.id
                });
            }
        });
    }
});</code></pre><h2 id="51806cb0-8118-45ef-a948-e80b06b52052" class><strong>Registering a Behaviour</strong></h2><p id="8b85e840-f9eb-4007-a82e-69d115652fc5" class>Thereafter, we will be registering a new behaviour. This behaviour will be mapped to the physical action we just created. We will be using the&#xA0;<code>singleSelect</code>&#xA0;behaviour we created while learning about registering behaviours. You can find the details about it&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/register-behaviour">here</a></mark>. The code for the same is provided below:</p><pre id="483030e0-6776-475b-b01b-80e8134f3836" class="code"><code>ActionModel
          .for(canvas)
          .registerBehaviouralActions(class SingleSelectBehaviour extends GenericBehaviour {
            static formalName () {
              return &apos;singleSelect&apos;;
            }
            setSelectionSet (addSet, selectionSet) {
      
              if (addSet === null || !addSet.length) {
                selectionSet.reset();
              } else {
                  selectionSet.reset();
                  selectionSet.add(addSet);
              }
            }
      });</code></pre><h2 id="ff3f4573-694f-4f41-bff9-4bb0707d2aca" class><strong>Mapping the behaviour to the physical action</strong></h2><p id="a27410c5-7d86-4672-b6db-672f1ede1646" class>We will now map the&#xA0;<code>singleSelect</code>&#xA0;behaviour with the&#xA0;<code>ctrlClick</code>&#xA0;physical action we have created. You can read more about mapping behaviours to physical actions&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/mapping-behaviour-physical">here</a></mark>. Find the code for the same below:</p><pre id="98fabf17-0996-4c52-8a37-8bb13c1b969e" class="code"><code>ActionModel
.for(canvas)
.registerPhysicalBehaviouralMap({
     ctrlClick: {
          behaviours: [&apos;singleSelect&apos;]
      }
})</code></pre><h2 id="60ec19a5-86e7-4449-8d48-fe87dfb117d5" class><strong>Custom Interaction Using A Spawnable Side Effect</strong></h2><h3 id="83d1cbdb-eda8-47e6-9ed9-9383a088107c" class><strong>Registering a Spawnable Side Effect</strong></h3><p id="42780169-023d-4170-a2a9-76ae66ff6d5c" class>We will first register the spawnable side effect,&#xA0;<code>TextSideEffect</code>&#xA0;that we have learned earlier. You can find it&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/register-sideeffects">here</a></mark>. The code for the same can be found below:</p><pre id="849e7a67-8833-4f10-a78b-5b5257dbc607" class="code"><code>ActionModel
          .for(canvas)
          .registerSideEffects(class TextSideEffect extends SpawnableSideEffect {
            static formalName () {
              return &apos;selection-text&apos;;
            }

            apply (selectionSet) {
              const dataModel = selectionSet.mergedEnter.model;
              const drawingContext = this.drawingContext();

              const textGroups = this.createElement(drawingContext.sideEffectGroup, &apos;text&apos;, [1]);

              /* createElement is a utility method for side effects */
              textGroups.html(`Selected:${dataModel.getData().data.map(e =&gt; e.join(&apos;, &apos;))}`);

              textGroups.attr(&apos;y&apos;, &apos;30&apos;);
              return this;
            }
          })</code></pre><h3 id="ce2ab443-a757-4aff-b4c3-7d2b522d83bf" class><strong>Mapping the side effects to the behaviour</strong></h3><p id="47ea068a-93c5-4e1f-8830-6b49d3680b4d" class>Now we will map the new side effect,&#xA0;<code>TextSideEffect</code>&#xA0;with the behaviour&#xA0;<code>singleSelect</code>. You can read about mapping side effects to behaviours&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/mapping-sideeffects-behaviour">here</a></mark>. The code to do the same is found below:</p><pre id="bac1fbbb-1f8b-46d6-8cb2-aad51372c3f4" class="code"><code>.mapSideEffects({
    singleSelect: [&apos;selection-text&apos;]
})</code></pre><h3 id="6a0d78bf-4af4-4992-90cd-dae47f63d751" class><strong>Putting it all together</strong></h3><p id="af1865f9-8d8b-4be4-a4bc-dfc4b9c4091b" class>Once we have mapped the physical action with behaviours and behaviours with side effects, we can see it work every time we Ctrl+Click on the bars, we get a spawnable side effect along with the single select behaviour:</p><figure id="40e17f4c-71f6-47ed-ae33-2eca4bb3fe5a"><div class="source"><iframe id="cp_embed_vYEyvYY" src="https://codepen.io/chartshq/embed/preview/vYEyvYY?height=600&amp;slug-hash=vYEyvYY&amp;default-tabs=js,result&amp;host=https://codepen.io&amp;editable=true" title=" custom-interaction-spawnable-sideeffect" scrolling="no" frameborder="0" height="600" allowtransparency="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe></div></figure><p id="97617f86-07d1-4de6-aee2-652e72b68327" class>We can see text appear over the bar when we press&#xA0;<code>Ctrl + Click</code>&#xA0;on a bar. It shows us the exact bar selected on the top of the chart. When we select a different bar, that corresponding bar is now the selected set and hence, the data for the same appears on the top of the canvas.</p><h2 id="fd4b6431-4ee0-454c-b863-4d84c65582a2" class><strong>Custom Interaction Using A Surrogate Side Effect</strong></h2><h3 id="d024b2ab-a7f8-4532-b876-4ee655561f89" class><strong>Registering a Surrogate Side Effect</strong></h3><p id="9aefa875-2fdf-4e54-8fa7-c314d3f777ab" class>We will first register the surrogate side effect,&#xA0;<code>StrokeSideEffect</code>&#xA0;that we have learned earlier. You can find it&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/register-sideeffects">here</a></mark>. The code for the same can be found below:</p><pre id="e04c7da4-c255-4d6a-aaa9-ef15442e5d81" class="code"><code>.registerSideEffects(class StrokeSideEffect extends SurrogateSideEffect{
    static formalName() {
        return &apos;stroke-effect&apos;;
    }

     apply(selectionSet) {
       const { completeSet, mergedExit, mergedEnter } = selectionSet;
       const context = this.firebolt.context;
       const layers = context.layers();
       layers.forEach((layer) =&gt; {
          const allElements = layer.getPlotElementsFromSet(completeSet.uids);
          allElements.forEach(elem =&gt; elem.style(&apos;stroke&apos;, &apos;&apos;).style(&apos;stroke-width&apos;, 2))
          const enterElements = layer.getPlotElementsFromSet(mergedEnter.uids);
          enterElements.forEach(elem =&gt; elem.style(&apos;stroke&apos;, &apos;red&apos;))
          const exitElements = layer.getPlotElementsFromSet(mergedExit.uids);
          exitElements.forEach(elem =&gt; elem.style(&apos;stroke&apos;, &apos;green&apos;))
      });
   }
})</code></pre><h3 id="9d665377-4f34-4c05-a916-b278119d56f4" class><strong>Mapping the side effects to the behaviour</strong></h3><p id="1b34786c-e9e4-4e8e-b194-2588cff2000e" class>Now we will map the new side effect,&#xA0;<code>StrokeSideEffect</code>&#xA0;with the behaviour&#xA0;<code>singleSelect</code>. You can read about mapping side effects to behaviours&#xA0;<a href="https://muzejs.org/docs/mapping-sideeffects-behaviour">here</a>. The code to do the same is found below:</p><pre id="5c04632f-acab-475b-b65a-25ee2ab6c72e" class="code"><code>.mapSideEffects({
    singleSelect: [&apos;stroke-effect&apos;]
})</code></pre><h3 id="be22d7fc-3347-414b-a018-dac6c9242071" class><strong>Putting it all together</strong></h3><p id="f88cd839-3178-4329-b570-569689c07577" class>Once we have mapped the physical action with behaviours and behaviours with side effects, we can see it work every time we Ctrl+Click on the bars, we get a spawnable side effect along with the single select behaviour:</p><figure id="606f59f9-0086-4a45-9c81-f2ba85b3c8b7"><div class="source"><iframe id="cp_embed_bGNBObB" src="https://codepen.io/chartshq/embed/preview/bGNBObB?height=600&amp;slug-hash=bGNBObB&amp;default-tabs=js,result&amp;host=https://codepen.io&amp;editable=true" title="custom-interaction-surrogate-sideeffect" scrolling="no" frameborder="0" height="600" allowtransparency="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe></div></figure><p id="8ee08019-c60d-481e-ae14-aecade5bc83c" class>You can see the strokes on each of the selected and non selected bars whenever you click on the mouse after pressing the&#xA0;<code>Ctrl</code>&#xA0;button.</p><h2 id="673fd006-0fa5-43b7-9005-4d2be79d1b60" class><strong>Wrapping Up</strong></h2><p id="bbb6d5aa-3a23-496b-9fe5-cf91454833ac" class>This marks the end of the concepts regarding the interaction in Muze. These interactions play a vital role in making the canvases dynamic and the data driven conceptualization of the same plays a vital role in creating completely custom interactions.</p></div></article></body><script>hljs.initHighlightingOnLoad();</script><script>hljs.initHighlightingOnLoad();</script></html>