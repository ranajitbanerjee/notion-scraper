<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Operators</title><style>
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark-href {
	font-size: 0.75em;
	opacity: 0.5;
}

.sans { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, KaiTi, STKaiTi, '华文楷体', KaiTi_GB2312, '楷体_GB2312', serif; }
.mono { font-family: Nitti, 'Microsoft YaHei', '微软雅黑', monospace; }
.pdf .sans { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .code { font-family: Source Code Pro, 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, KaiTi, STKaiTi, '华文楷体', KaiTi_GB2312, '楷体_GB2312', serif, 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .mono { font-family: PT Mono, Nitti, 'Microsoft YaHei', '微软雅黑', monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style><link rel="stylesheet" href="/static/iframe-docs/css/github.css"><link rel="stylesheet" href="/static/iframe-docs/css/style.css"><script src="/static/iframe-docs/js/highlight.pack.js"></script><script src="/static/iframe-docs/js/test.js"></script></head><body><article id="b80e31f7-c635-4c92-b291-86a817035284" class="page sans"><header><h1 class="page-title"><strong>Operators</strong></h1></header><div class="page-body"><p id="12e2b894-0956-4062-8da0-7ac9b2200ec2" class><strong>Table of Contents</strong></p><div class="indented"><nav id="ad0c46de-47a2-43ef-b11b-64b66ae329d4" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#d2abce3d-dc55-4667-a99b-7c63ee77f2e4"><strong>How to use Operators?</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#4b0791b9-2546-4d66-9ee5-4773699c0562"><strong>Data</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#2e404bd1-4177-424e-b84e-194a9449ee36"><strong>Terminology</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#4ca4f539-a506-46b7-9a6a-a7487c283898"><strong>Commonly used relational algebra operators</strong></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#baa3d203-9030-474d-885f-80f6b41fa511"><code><strong>select</strong></code></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0489fe27-eca1-406f-a89d-2a8e56f4c351"><code><strong>project</strong></code></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#1075b3fd-90df-4ec0-879c-af82258d6220"><code><strong>groupBy</strong></code></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#ada3e03b-9820-4e69-a9d8-4291964259e3"><code><strong>sort</strong></code></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#3ba1d602-aa67-4a33-8390-15aac61a254e"><strong>Other relational algebra compliant operators</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#39832979-c66e-4aa8-8418-a699da40dcb0"><strong>Combining multiple operators</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#5e087914-9796-45a0-a1c5-a47cfdfeabc4"><strong>Chaining operators</strong></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#f2b34930-f147-40f8-a323-01fae9dea72f"><strong>Additional operators provided by DataModel</strong></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#cf36b1fd-8479-4438-8b6e-599d66b7a126"><code><strong>calculateVariable</strong></code></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#b5e35081-4c1d-45da-857a-0ffd1d748669"><strong>Wrapping up</strong></a></div></nav></div><p></p><hr id="ad12af5e-5267-4485-ac74-e8947015a757"><p id="bc09730e-3281-4645-bee8-fa71b1561bef" class>Operators are pure functions which are used to transform data in&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/introduction-to-datamodel">DataModel</a></mark>. There are some operators which are relational algebra compliant and rest of the operators provides ease of use and completeness of workflow. Operators help you achieve the following:</p><ul id="5269ee36-1cdb-4816-a7f5-1472db712ee6" class="bulleted-list"><li><strong>Selection</strong>: Filtering rows/tuples of a DataModel based on a predicate</li></ul><ul id="3ee66f58-566a-42b2-820b-14c52c1beaae" class="bulleted-list"><li><strong>Projection</strong>: Selecting only specific fields (columns) from a DataModel</li></ul><ul id="39db4c5c-cd54-408a-9091-0c9b2ef6629b" class="bulleted-list"><li><strong>Grouping</strong>: Grouping rows/tuples based on an aggregation function on specific fields (columns)</li></ul><ul id="1c305b4f-be91-4be6-8a9e-dea468c5730a" class="bulleted-list"><li><strong>Sorting</strong>: Arranging one or more fields (columns) in a DataModel in ascending on descending order based on the values</li></ul><ul id="bb6d51ea-154c-4edd-b769-9f2c5fd8bbe2" class="bulleted-list"><li><strong>Binning</strong>: Transforms a measure into a set of discrete values, each value being an interval</li></ul><ul id="21a0a347-e957-4a6f-8390-c730e2d0ed07" class="bulleted-list"><li><strong>Calculated Variables</strong>: Create a new field (column) from existing fields (columns)</li></ul><ul id="6b398833-c172-4069-aa32-bb9be0cbc7b7" class="bulleted-list"><li><strong>Composing operations</strong>: Chain all previous operations or compose them to get a single DataModel</li></ul><h2 id="d2abce3d-dc55-4667-a99b-7c63ee77f2e4" class><strong>How to use Operators?</strong></h2><p id="5d6b27bb-1f18-4a48-9187-64c862e082b2" class>An operator is a function which operates on data and returns a new instance of DataModel with transformed data. This immutable behaviour helps you develop a large complex system of visualizations and interactivity.</p><p id="29d446dc-31e5-4cc5-aa2f-3a15cfdd8f47" class>You can either chain a set of operators to be applied on a source DataModel or&#xA0;<code>compose</code>&#xA0;several operator to create a new operator and pass an instance of Datamodel to transform it.</p><p id="aa77d2d5-6c92-4943-a124-1fbc4e768653" class>Chaining of operators in general looks like</p><pre id="4eb011f0-9a74-49f5-85c0-514d74c31439" class="code"><code>resultantDef = obj
    .op1((...params) =&gt; /* predicate definition here */)
    .op3((...params) =&gt; /* predicate definition here */)
    .op3((...params) =&gt; /* predicate definition here */)</code></pre><p id="bed2fe96-1bd8-4cfb-ae07-ec1ffc60cc03" class>Composing of operator in general looks like</p><pre id="48e8adff-9ba8-4f78-b567-6738a167665a" class="code"><code>composedOp = compose(
    op1((...params) =&gt; /* predicate definition here */),
    op2((...params) =&gt; /* predicate definition here */),
    op3((...params) =&gt; /* predicate definition here */)
); /* creates a new operator which is a combination of all other  operators */

resultantDef = composedOp(obj);</code></pre><p id="5713fc06-d318-4719-a017-1ba96c330e02" class>Head&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/api-datamodel">here</a></mark>&#xA0;to checkout all the operators.</p><p id="69824b64-2112-49ed-b015-5b58af8a26cf" class>As you might have guesses, chaining creates intermediate DataModel instances and hold those in memory.&#xA0;<code>compose</code>&#xA0;internally performs chaining operations on the DataModel and returns a single DataModel instance, thereby eliminating the need to create multiple intermediate DataModels.</p><h2 id="4b0791b9-2546-4d66-9ee5-4773699c0562" class><strong>Data</strong></h2><p id="6bf59040-c1e0-479e-8fb9-ac80d40bbb64" class>We will be using&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/static/cars.csv">cars.csv</a></mark>&#xA0;data for illustration purpose.</p><h2 id="2e404bd1-4177-424e-b84e-194a9449ee36" class><strong>Terminology</strong></h2><p id="4e8080f8-15a9-4352-8c7a-7be8d90b1f15" class>Through out the document we talk about variables, fields, columns interchangeably.</p><p id="3e79cd81-3ffa-409e-a046-95465596aac7" class>Variables are from raw data which gets translated to fields in DataModel. But all of these are just columns of a tabular data format.</p><h2 id="4ca4f539-a506-46b7-9a6a-a7487c283898" class><strong>Commonly used relational algebra operators</strong></h2><p id="0f9f298a-9c42-4cd6-ab9c-6bfee5f39fe9" class>Lets explore DataModel&apos;s operators. We will be describing an use case before using an operator. This way you will get to know how powerful operators are and also you will develop an intuitive sense where to use these operators.</p><h3 id="baa3d203-9030-474d-885f-80f6b41fa511" class><code><strong>select</strong></code></h3><p id="0eaf661f-a12a-4c96-9a64-b51a80b948f6" class><strong>What we want to do</strong>: We want to see only the cars made in USA.</p><p id="b14326fe-eab3-43dd-9cee-bb29ddec7576" class>To achieve the above result, clearly we need to filter all the rows for which the data value in&#xA0;<em>Origin</em>&#xA0;field is&#xA0;<em>USA</em>.</p><p id="af1785be-f062-463b-b343-695596e9a816" class>We use&#xA0;<code>select</code>&#xA0;operator to filter the rows. Selection is a row filtering operation based on a predicate. A predicate is a simple function which returns true or false. The predicate is called for every tuple (row) with value of current tuple passed as arguments. By default, if the predicate returns true then the tuple is included in resultant datamodel.</p><p id="37ef77f1-95dd-449f-b6c2-2fb52031facb" class>Head&#xA0;<a href="https://muzejs.org/docs/api-operators#select">here</a>&#xA0;to know more about this operator.
</p><figure id="6e3e8f2c-5448-42de-a272-83ba7d68312d"><div class="source"><iframe id="cp_embed_NWPrJRb" src="https://codepen.io/chartshq/embed/preview/NWPrJRb?height=600&amp;slug-hash=NWPrJRb&amp;default-tabs=css,result&amp;host=https://codepen.io&amp;editable=true" title="operators-select" scrolling="no" frameborder="0" height="600" allowtransparency="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe></div></figure><h3 id="0489fe27-eca1-406f-a89d-2a8e56f4c351" class><code><strong>project</strong></code></h3><p id="9ba85448-6ccb-4976-9051-295c04396bbb" class><strong>What we want to do</strong>:&#xA0;<em>We want to know which car is from which country? .</em></p><p id="6a093b02-ba9b-4a05-8746-4caf604b3891" class>To achieve the above outcome, we need to only include&#xA0;<em>Name</em>&#xA0;and&#xA0;<em>Origin</em>&#xA0;(country) fields in our derived DataModel. We use&#xA0;<code>project</code>&#xA0;to include specific fields, based on a given list of fields.</p><p id="7a1bdf43-3cd5-4ec8-90f8-4bce5f5b0481" class>Head&#xA0;<a href="https://muzejs.org/docs/api-Operators#project">here</a>&#xA0;to know more about this operator.</p><figure id="bc95cf3f-7683-4261-85ce-2b99ecb9875a"><div class="source"><iframe id="cp_embed_KKwMEyy" src="https://codepen.io/chartshq/embed/preview/KKwMEyy?height=600&amp;slug-hash=KKwMEyy&amp;default-tabs=css,result&amp;host=https://codepen.io&amp;editable=true" title="operators-project" scrolling="no" frameborder="0" height="600" allowtransparency="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe></div></figure><p id="85a7ccb3-427d-425f-b0d1-424a7e9d21b3" class>By default all the filtering operators operates on&#xA0;<em>Inclusion mode,</em>&#xA0;which means if the predicate returns true then the row is included.&#xA0;<em>Exclusion mode</em>&#xA0;is the vice versa operation (e.g., exclusion in this case would mean select all columns apart from&#xA0;<em>Name</em>&#xA0;&amp;&#xA0;<em>Origin</em>). Learn more the modes&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/api-relation#project">here</a></mark>.</p><h3 id="1075b3fd-90df-4ec0-879c-af82258d6220" class><code><strong>groupBy</strong></code></h3><p id="f09059c6-d183-46ea-ab88-fb8af1889775" class><strong>What we want to do</strong>:&#xA0;<em>We want to see max horsepower of for each car maker.</em></p><p id="2191edfd-0f12-4995-865a-dfadf6d35f28" class>To achieve the above result, we have to group the cars by&#xA0;<em>maker</em>. Essentially we are getting rid of all the dimensions but&#xA0;<em>Maker</em>&#xA0;and aggregating the values to get one value of&#xA0;<em>Horsepower</em>&#xA0;per&#xA0;<em>Maker</em>.</p><p id="a1d9fb0e-66a3-4347-9300-8464db42e048" class><code>groupBy</code>&#xA0;helps you achieve that, as shown below:</p><figure id="e490242c-40d0-46bd-bdc4-1d270639d3b0"><div class="source"><iframe id="cp_embed_XWJKGVP" src="https://codepen.io/chartshq/embed/preview/XWJKGVP?height=600&amp;slug-hash=XWJKGVP&amp;default-tabs=css,result&amp;host=https://codepen.io&amp;editable=true" title="operators-groupBy" scrolling="no" frameborder="0" height="600" allowtransparency="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe></div></figure><p id="e1f28f46-e08a-4d3b-9641-7e49fb303f10" class>To know more about this operator, you can head&#xA0;<a href="https://muzejs.org/muze/api/datamodel#select">here</a>.</p><h3 id="ada3e03b-9820-4e69-a9d8-4291964259e3" class><code><strong>sort</strong></code></h3><p id="73a66189-0ef1-461e-940e-1740b3a2e673" class><strong>What we want to do:</strong>&#xA0;<em>We want to sort cars first by their origin alphabetically and then by weight.</em></p><p id="a6c725c3-dba3-480b-8d1d-5db6f4c87f48" class>You can apply multi level sorting using this operator. For more advance use case, you might want to order one variable with respect to another variable. Like,&#xA0;<em>sort country based on average mileage of a car</em>. To know all format of sorting, head&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/api-datamodel#sort">here</a></mark>.</p><figure id="fb7fe6d7-08d7-4177-a215-e5c36758dcdd"><div class="source"><iframe id="cp_embed_povbYyw" src="https://codepen.io/chartshq/embed/preview/povbYyw?height=600&amp;slug-hash=povbYyw&amp;default-tabs=css,result&amp;host=https://codepen.io&amp;editable=true" title="operators-sort" scrolling="no" frameborder="0" height="600" allowtransparency="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe></div></figure><p id="6fa798e6-81dd-4319-a7a6-43743d8c60af" class>First, it alphabetically sorts the DataModel by&#xA0;<em>Origin</em>&#xA0;and sorts the resultant dataset by&#xA0;<em>Miles_per_Gallon</em>&#xA0;returning the sorted DataModel.</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="9db0ef3d-d100-40d6-ac42-0c884227d664"><div style="font-size:1.5em"><span class="icon">&#x1F4A1;</span></div><div style="width:100%"><mark class="highlight-yellow"><strong>Sorting does not support compose
</strong></mark>It&apos;s a computationally expensive operation. In order to perform sorting along with other operations, we can chain them together instead of composing them.</div></figure><h3 id="3ba1d602-aa67-4a33-8390-15aac61a254e" class><strong>Other relational algebra compliant operators</strong></h3><p id="0bc48e2a-7bb4-46a4-8c65-9013bbe9979b" class>There are a lot of other operators like&#xA0;<em>innerJoin, naturalJoin, leftOuterJoin, rightOuterJoin, FullOuterJoin, union, difference</em>&#xA0;which you can use in the similar way. Explore all of this in&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/api-datamodel">Datamodel&apos;s API</a></mark>.</p><h2 id="39832979-c66e-4aa8-8418-a699da40dcb0" class><strong>Combining multiple operators</strong></h2><p id="6d9f76ed-2640-4b0a-b7ca-f84e47c5a7ff" class><strong>What we want to do</strong>: We&#xA0;<em>want just the names of cars which were released in 1970.</em></p><p id="41226e19-f147-4ec2-a290-e75122906d14" class>To do this, you will need to execute multiple operators on the same data.</p><p id="a1aba074-aa6b-4ae4-ac1a-733cf7df2acd" class>The first step is to apply the&#xA0;<code>select</code>&#xA0;operation to filter all cars from 1970. In the resultant DataModel,&#xA0;<em>Year</em>&#xA0;field contains the same value, which is 1970. In second step we&#xA0;<code>project</code>&#xA0;the&#xA0;<em>name</em>&#xA0;field.</p><p id="611e0c95-568c-4fd0-bbf0-5d9da70c4a41" class>We compose a new operator&#xA0;<code>carsFrom1970</code>&#xA0;using our already known operator.</p><figure id="8b0cb4b0-49ce-40ec-a802-952f84c9745a"><div class="source"><iframe id="cp_embed_eYmzXKL" src="https://codepen.io/chartshq/embed/preview/eYmzXKL?height=600&amp;slug-hash=eYmzXKL&amp;default-tabs=css,result&amp;host=https://codepen.io&amp;editable=true" title="combining-multiple-operators" scrolling="no" frameborder="0" height="600" allowtransparency="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe></div></figure><p id="db199bf0-1d2f-42f4-8bd8-1de89c82969a" class>
</p><h2 id="5e087914-9796-45a0-a1c5-a47cfdfeabc4" class><strong>Chaining operators</strong></h2><p id="7eb1db8b-8c57-4005-a45f-d6777fdbe4a9" class>An alternate way to solve this is by chaining the operators.</p><figure id="15895d02-643f-426e-8b56-800b59fccb8f"><div class="source"><iframe id="cp_embed_MWYedea" src="https://codepen.io/chartshq/embed/preview/MWYedea?height=600&amp;slug-hash=MWYedea&amp;default-tabs=css,result&amp;host=https://codepen.io&amp;editable=true" title="chaining-operators" scrolling="no" frameborder="0" height="600" allowtransparency="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe></div></figure><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="e184d597-9716-4593-8628-4ea825650e17"><div style="font-size:1.5em"><span class="icon">&#x1F4A1;</span></div><div style="width:100%"><mark class="highlight-yellow"><strong>Chaining vs Composing
</strong></mark>Although chaining operators looks very concise, it creates intermediate instances of DataModel which we might never use. Thats why we prefer composing over chaining.</div></figure><h2 id="f2b34930-f147-40f8-a323-01fae9dea72f" class><strong>Additional operators provided by DataModel</strong></h2><p id="f0ebfada-1f6a-4628-bde7-6bfe5a6705ec" class>There are few operators which are not defined by relational algebra concepts but are useful for completeness of data transformation for the intent of data visualization.</p><h3 id="cf36b1fd-8479-4438-8b6e-599d66b7a126" class><code><strong>calculateVariable</strong></code></h3><p id="77cc2290-2aa9-4d6d-9dcf-44474ea1fbc0" class><strong>What we want to do</strong>:&#xA0;<em>We want to know how powerful a car is when you press the gas!</em></p><p id="4817a5e3-47ac-487f-a580-5f4f3ce4aae6" class>For a car, horsepower is not a measure of its power, although it looks like one. We have to take the weight into account. Cars with higher weights tend to have higher horsepower and vice versa.</p><p id="5d9ee1bd-3a34-4ef7-a37d-3ce03b5c2486" class><em>Hence, to get the power to weight ratio of a car, we have to calculate a new variable from the existing one:</em></p><pre id="25023773-9280-47ea-8dcc-57732ac7bdc5" class="code"><code>power_to_weight = horsepower / weight_in_lbs</code></pre><figure id="7eae9971-c41e-413d-b4ad-6383f61c3982"><div class="source"><iframe id="cp_embed_BayzeLb" src="https://codepen.io/chartshq/embed/preview/BayzeLb?height=600&amp;slug-hash=BayzeLb&amp;default-tabs=css,result&amp;host=https://codepen.io&amp;editable=true" title="operators-calculateVariable" scrolling="no" frameborder="0" height="600" allowtransparency="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe></div></figure><p id="ccc4b2c3-2b11-455e-87b8-42b4526f7298" class>Breaking the above code down:</p><ul id="7c18810e-1ce5-4535-b009-aadc9395a664" class="bulleted-list"><li>We&apos;ve created a new field by declaring its name and field type:<pre id="f7907106-b44e-46eb-8d2d-85ca6cb1e921" class="code"><code>calculateVariable({
  name: &apos;power_to_weight&apos;,  /* the new variable being created */
  type: &apos;measure&apos; /* type of the new variable */
}</code></pre></li></ul><ul id="cdf8c4de-324d-4165-872a-9e75c76ff1df" class="bulleted-list"><li>The next argument specifies existing fields, based on which the new field is to be derived and the derivation criteria. We provide an array, whose elements are the names of existing fields and the last element of array takes a function which returns the value of the new variable. The functions is called for each row of the subject DataModel instance passing the dependent fields&apos; value as parameter.<pre id="1fa34e1e-b99a-48e0-958c-ccb8128a942e" class="code"><code>[&apos;horsepower&apos;, &apos;weight_in_lbs&apos;,  /* value is calulated based on these to vaiables */
()=&gt; {}]  /* function is called for each row passing the value of the dependent variables */</code></pre><p id="5dd293ed-c087-4511-bc89-e16700f2a1a1" class>This function receives the value of each of the fields from the DataModel and can be combined to get the calculated variable:</p><pre id="76f685f3-0617-4c3d-8dc6-e6e5351f3fcd" class="code"><code>[&apos;horsepower&apos;, &apos;weight_in_lbs&apos;, (hp, weight) =&gt;{ 
      return hp / weight; /* Logic for value of the calculated variable */
 }];</code></pre><p id="bf57bc3b-68b3-4a92-8daf-09b66d56779c" class>
</p></li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="64e40dbf-1e60-443b-ab03-cbd86a8f9545"><div style="font-size:1.5em"><span class="icon">&#x1F4A1;</span></div><div style="width:100%"><mark class="highlight-yellow"><strong>calulateVariable is not composable
</strong></mark><code>calculateVariable</code>&#xA0;should not be done in a loop or towards the bottom of operation chain. If possible perform this action towards the top of the operation chain.&#xA0;<code>calculateVariable</code>&#xA0;is kept out of compose for intentionally to force the above two factor.</div></figure><p id="3edf29f5-466e-4fed-81b3-d9c7b78cc033" class>
</p><p id="9c346154-66d4-4af9-b102-27b64b681c56" class>In the above example, we created a new field which calculated the&#xA0;<code>power_to_weight</code>&#xA0;ratio, which is a measure. If we need to create a dimension as a calculated variable, we can do it through a look-up table, as shown in the example below. Here, based on the&#xA0;<code>power_to_weight</code>&#xA0;ratio, we intend to assign a text value (dimension) which is one of:&#xA0;<code>Low</code>,&#xA0;<code>Decent</code>, or&#xA0;<code>High</code>.</p><p id="ab3b1e49-bb96-42a0-b812-29d2d09498cd" class>We will name this new variable (field)&#xA0;<code>Performance</code>&#xA0;which is derived from the earlier calculated variable&#xA0;<code>power_to_weight</code>&#xA0;and a look-up table .</p><figure id="7ea0c556-3eab-4771-97a1-7611447b9d30"><div class="source"><iframe id="cp_embed_QWwERgW" src="https://codepen.io/chartshq/embed/preview/QWwERgW?height=600&amp;slug-hash=QWwERgW&amp;default-tabs=js,result&amp;host=https://codepen.io&amp;editable=true" title="calculateVariable Example 2" scrolling="no" frameborder="0" height="600" allowtransparency="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe></div></figure><h2 id="b5e35081-4c1d-45da-857a-0ffd1d748669" class><strong>Wrapping up</strong></h2><p id="7ed603fe-04eb-446a-bd91-a53401dc910f" class>We have discussed the most used operators in the above section. DataModel supports many more operators. Checkout the API for&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/api-datamodel">DataModel</a></mark><mark class="highlight-blue">&#xA0;</mark>and&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/api-relation">Relation</a></mark>&#xA0;to understand all the operators.</p><p id="03139f54-e92a-4493-82a7-f39ae682b895" class>
</p></div></article></body><script>hljs.initHighlightingOnLoad();</script><script>hljs.initHighlightingOnLoad();</script></html>