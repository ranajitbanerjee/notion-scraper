<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Physical Actions</title><style>
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark-href {
	font-size: 0.75em;
	opacity: 0.5;
}

.sans { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, KaiTi, STKaiTi, '华文楷体', KaiTi_GB2312, '楷体_GB2312', serif; }
.mono { font-family: Nitti, 'Microsoft YaHei', '微软雅黑', monospace; }
.pdf .sans { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .code { font-family: Source Code Pro, 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, KaiTi, STKaiTi, '华文楷体', KaiTi_GB2312, '楷体_GB2312', serif, 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .mono { font-family: PT Mono, Nitti, 'Microsoft YaHei', '微软雅黑', monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="ee074e47-dd73-4332-81e4-2ecfba5f0a3b" class="page sans"><header><h1 class="page-title"><strong>Physical Actions</strong></h1></header><div class="page-body"><p id="bfed9042-c7fe-4dd0-882e-e5ec90ebcc76" class>In this section, we will get an in depth idea of what physical actions are and how they work.</p><p id="a45fe845-88f7-4104-87c9-4d93955d89fd" class>Physical Actions in Muze are the basic browser actions that are physically initiated by the user/developer. Any of the predefined actions, like&#xA0;<strong>click, hover, keypress</strong>&#xA0;or&#xA0;<strong>drag</strong>&#xA0;are considered as a Physical Actions.</p><p id="35360439-c7c3-4f89-9ac1-e5305c9f9128" class>Each physical action has its own target element and a method which triggers the change in the behaviour attached to it. This triggering of behaviour change is called&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/dispatching-behaviours"><strong>dispatching a behaviour</strong></a></mark>. Let us first understand how the physical action works.</p><p id="bf3c684d-be99-4041-81a0-7458eb3e1c47" class>Let&apos;s try and understand how this works with the simple&#xA0;<mark class="highlight-blue"><a href="https://muzejs.orga/static/cars.json">cars.json</a></mark>&#xA0;data.</p><h2 id="a7d542c9-d9a2-4e7e-adcb-a64353036061" class><strong>How do Physical Actions Work?</strong></h2><p id="7dcc5d11-5f25-490c-88af-71641450075f" class>Whenever a physical action is triggered(by the various browser events or user defined events), it retrieves the data set attached to it.</p><p id="f8ec08bd-b9e7-4004-b61d-353808494611" class>Let us understand what the data set attached to an event refers to by taking the example of a simple bar chart:</p><figure id="1eeb4881-acb5-43af-bcef-fe027c3417df" class="image"><a href="https://muzejs.org/static/images/copy.svg"><img style="width:72px" src="https://muzejs.org/static/images/copy.svg"></a></figure><pre id="0d23a034-27c8-41c9-a84b-039db0939f09" class="code"><code>loadData(&apos;/static/cars.json&apos;).then((res) =&gt; {    
  let node = document.getElementById(&apos;chart-container&apos;);    
  const env = muze();    
  const canvas = env.canvas();    
  const DataModel = muze.DataModel;  	
  loadData(&apos;/static/cars-schema.json&apos;).then((schema) =&gt; {
    const dataModelInstance = new DataModel(res, schema);
          canvas
          	.width(600)
          	.height(400)
			.rows([&apos;Miles_per_Gallon&apos;])
			.columns([&apos;Cylinders&apos;])
    		.layers([{
              	mark: &apos;bar&apos;
            }])
			.data(dataModelInstance)
    		.mount(node)
    });
})</code></pre><p id="d0eae8c3-49b6-4cc4-8ec1-a8da2dc2d81c" class>In the example above, we can interact with the chart by either hovering or clicking or brushing on the bars. Let us see what physical actions does when we hover on a certain bar in the chart as can be seen below:</p><figure id="c5a807ac-0dbc-4511-bde2-59a214074100" class="image"><a href="https://muzejs.org/static/docs_images/physical-action/1.png"><img src="https://muzejs.org/static/docs_images/physical-action/1.png"></a></figure><p id="807ceae1-8999-417c-af6a-c4020a79cdb2" class>When hovering over the bar, we see a tooltip occur. The data present in the tooltip is generated when the physical action retrieves the information about the event itself. For instance, while hovering in the above example, the physical action determines that the data associated with the event belongs to the&#xA0;<em>Cylinder</em>&#xA0;value of&#xA0;<strong>3</strong>.</p><p id="5696b3af-0c71-4012-8f28-0e967a35b72e" class>It then passes this information to the behavioural action to trigger the change in behaviour. This is called dispatching of behaviours.</p><p id="807ba665-aea2-4a62-8748-9b3166498ed0" class>Let us now see how this execution happens in the code.</p><h3 id="e7dba186-74d6-4fed-be45-71f72d31ab19" class><strong>Action Behaviour Map</strong></h3><p id="9bc95f09-30ec-4217-b97d-919b2785093a" class>Muze stores the set of pre-defined physical actions along with the behaviours mapped to it.</p><pre id="c372ac7d-bccb-4964-ae3f-e257dba1ba6c" class="code"><code>const actionBehaviourMap = {
         click: {
            behaviours: [&apos;select&apos;],
        }
    }</code></pre><p id="5bc26820-e0dc-4a79-9038-5bec59240ed5" class>For instance, as you can see in the object above, a map of the&#xA0;<code>click</code>&#xA0;action with the&#xA0;<code>select</code>&#xA0;behaviour has been created. Thus, whenever a the&#xA0;<code>click</code>&#xA0;action is triggered, the&#xA0;<code>select</code>&#xA0;behaviour gets triggered.</p><p id="e29483b8-650f-423d-8a88-78417bfe5a07" class>An action can have multiple behaviours attached to it as you can see below:</p><pre id="7dcc9f03-351e-4137-ac02-7a6f90d367c7" class="code"><code>const actionBehaviourMap = {
         click: {
            behaviours: [&apos;select&apos;, &apos;crossline&apos;],
        }
    }</code></pre><p id="23134741-70f9-4756-a213-6aacb04b3faa" class>Both&#xA0;<code>select</code>&#xA0;and&#xA0;<code>crossline</code>&#xA0;are examples of behaviours. Read more about behaviours&#xA0;<mark class="highlight-blue"><a href="https://muzejs.org/docs/behaviours">here</a></mark>.</p><p id="43f04425-627f-4bfb-a929-8e16f9ed2f2f" class>For now, let us understand what does a physical action actually do before it can initiate a change in behaviour.</p><h3 id="2b915d83-66a2-432d-bd5a-fdc346fd922c" class><strong>Physical Action Payload</strong></h3><p id="0507748e-4138-47c5-9b02-e3338e1b28a1" class>It is the responsibility of each physical action to generate a&#xA0;<strong>payload</strong>&#xA0;attached to that event. This payload contains the&#xA0;<strong>criteria</strong>&#xA0;based on which the behaviour has to be dispatched and an optional&#xA0;<strong>position</strong>&#xA0;config specifying where in the visualization the interaction has occurred, i.e., the (<strong>x,y) position.</strong>&#xA0;This position might be useful in creating additional reactions to a particular action but it is not necessary to provide unless required.</p><p id="cef143b3-3bf7-4d80-89c5-d79764daa252" class>For example, if the criteria for a particular action has to contain the&#xA0;<strong>Origin</strong>&#xA0;&apos;Japan&apos; and&#xA0;<strong>Cylinder</strong>&#xA0;values &#x2192; 3, 6 and 8, then the criteria and the payload will look like this:</p><pre id="32e2329e-9eaa-4230-94ba-d6a0c998be8d" class="code"><code>payload: {
        criteria: {
            Origin: [&apos;Japan&apos;],
            Cylinders: [3, 6, 8]
        }
    }</code></pre><p id="5ba7ef8e-87fc-4355-85cb-61dc6473863a" class>The objective of the physical action is to create this criteria and dispatch the behaviour attached to it. In order to create this criteria, the action retrieves the data attached to the point(s) in the visualization where the interaction takes place.</p><p id="3f852df9-c931-4cb1-99db-12f0d64c9178" class>This data is retrieved by converting the pixel value of the point where the interaction takes place to an actual row(s) in the DataModel.</p><p id="ff85f7ed-73c8-4014-8da9-9f80edf541c0" class>In addition to that, the action also retains the position for further use.</p><p id="87935820-a571-4e5a-8a10-57a892cd4936" class>The physical action is&#xA0;<strong>not</strong>&#xA0;directly related to any interaction. It just acts as a mediator between the actual event and the expected result from that event. The actual result of a particular action is triggered by the behaviour(s) dispatched by it.</p><h3 id="aa001bd7-6985-443d-a719-31257c8cde3e" class><strong>Dispatching Behaviour</strong></h3><p id="05359d55-bfe9-4fb5-be49-9ecd05f02666" class>Finally, the physical action needs to dispatch the behaviours attached to it. Dispatching a behaviour triggers a behavioural action, i.e., it causes the canvas to react to the physical action.</p><p id="db9a808c-9c31-4719-8d55-77ef72e8ca95" class>It uses Muze&apos;s&#xA0;<strong>Firebolt</strong>&#xA0;to dispatch the behaviours attached to it: and providing the generated payload as seen in the code below:</p><pre id="520511ce-5852-49da-8d6b-aefe7d42c39f" class="code"><code>firebolt.triggerPhysicalAction(&apos;ctrlClick&apos;, { criteria: nearestPoint.id });</code></pre><p id="bc71d6a4-a5c4-4380-ac50-da816413a073" class>Once the behaviour(s) receive the payload, they execute their respective behavioural actions. If you want to understand how behaviours work, read&#xA0;<a href="https://muzejs.org/docs/behaviours">here</a>.</p><h2 id="b5d17fd3-6932-4a46-9a9b-f05d787359cb" class><strong>Wrapping Up</strong></h2><p id="b2dbb366-0e6a-4031-a83b-df57847efd1e" class>To summarize:</p><ul id="c6461d6e-bd7b-435b-aa31-a601b4cf3168" class="bulleted-list"><li>A Physical Action is triggered everytime an event occurs</li></ul><ul id="2822f8bd-a8fb-46b3-a68c-73ff6987087a" class="bulleted-list"><li>It creates a payload with a criteria based on the set of data attached to that event</li></ul><ul id="512280eb-ddc6-4209-8318-daba907f27f7" class="bulleted-list"><li>It then dispatches the behaviour attached to it with that respective payload</li></ul><ul id="ea25bfc7-5f61-4dda-a501-5b9a0ca7ec1e" class="bulleted-list"><li>The behaviour attached to every physical action is stored in the actionBehaviourMap</li></ul></div></article></body></html>